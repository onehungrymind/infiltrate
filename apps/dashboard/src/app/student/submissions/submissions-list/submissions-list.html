<div class="list-container">
  <div class="list-header">
    <h1 class="list-title">Submissions</h1>
  </div>

  @for (submission of submissions; track submission.id) {
    <div
      class="list-item"
      [class.active]="isSelected(submission)"
      (click)="selected.emit(submission)"
    >
      <div class="list-item-content">
        <div class="list-item-main">
          <div class="list-item-header">
            @switch (getContentTypeIcon(submission.contentType)) {
              @case ('text') {
                <svg class="content-type-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5" />
                </svg>
              }
              @case ('url') {
                <svg class="content-type-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" />
                </svg>
              }
              @case ('file') {
                <svg class="content-type-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                </svg>
              }
            }
            <h3 class="list-item-title">
              {{ submission.title || 'Untitled' }}
            </h3>
          </div>
          @if (submission.content) {
            <p class="list-item-meta">
              {{ submission.content | slice:0:80 }}{{ submission.content.length > 80 ? '...' : '' }}
            </p>
          }
          <div class="list-item-badges">
            <span
              class="status-badge"
              [style.background-color]="getStatusColor(submission.status)"
            >
              {{ formatStatus(submission.status) | titlecase }}
            </span>
            @if (submission.score !== undefined && submission.score !== null) {
              <span class="score-badge">
                Score: {{ submission.score }}%
              </span>
            }
          </div>
        </div>
        @if (!readonly) {
          <button
            class="list-item-delete"
            (click)="onDelete(submission); $event.stopImmediatePropagation()"
            type="button"
            aria-label="Delete submission"
          >
            <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
              fill="currentColor" viewBox="0 0 24 24">
              <path fill-rule="evenodd"
                d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
                clip-rule="evenodd" />
            </svg>
          </button>
        }
      </div>
    </div>
  }

  @if (submissions.length === 0) {
    <div class="list-empty">
      <svg class="list-empty-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25Z" />
      </svg>
      <p class="list-empty-text">No submissions found</p>
    </div>
  }
</div>
