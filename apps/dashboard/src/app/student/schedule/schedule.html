<div class="schedule-container">
  <!-- Header -->
  <div class="schedule-header">
    <div class="header-left">
      <h1>Schedule</h1>
      <p class="subtitle">Plan your learning journey</p>
    </div>
    <div class="header-stats">
      <div class="stat-card">
        <span class="stat-value">{{ reviewsDueToday() }}</span>
        <span class="stat-label">Reviews Due Today</span>
      </div>
      <div class="stat-card">
        <span class="stat-value">{{ upcomingDeadlines() }}</span>
        <span class="stat-label">Upcoming Deadlines</span>
      </div>
    </div>
  </div>

  <!-- Calendar Controls -->
  <div class="calendar-controls">
    <div class="nav-controls">
      <button class="nav-btn" (click)="navigatePrevious()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m15 18-6-6 6-6"/>
        </svg>
      </button>
      <button class="today-btn" (click)="navigateToday()">Today</button>
      <button class="nav-btn" (click)="navigateNext()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m9 18 6-6-6-6"/>
        </svg>
      </button>
      <span class="view-title">{{ formatViewTitle() }}</span>
    </div>
    <div class="view-controls">
      <button
        class="view-btn"
        [class.active]="view() === CalendarView.Month"
        (click)="setView(CalendarView.Month)"
      >
        Month
      </button>
      <button
        class="view-btn"
        [class.active]="view() === CalendarView.Week"
        (click)="setView(CalendarView.Week)"
      >
        Week
      </button>
      <button
        class="view-btn"
        [class.active]="view() === CalendarView.Day"
        (click)="setView(CalendarView.Day)"
      >
        Day
      </button>
    </div>
  </div>

  <!-- Calendar -->
  <div class="calendar-wrapper">
    @switch (view()) {
      @case (CalendarView.Month) {
        <mwl-calendar-month-view
          [viewDate]="viewDate()"
          [events]="events()"
          [activeDayIsOpen]="activeDayIsOpen"
          (dayClicked)="onDayClicked($event.day)"
          (eventClicked)="onEventClicked($event.event)"
        />
      }
      @case (CalendarView.Week) {
        <mwl-calendar-week-view
          [viewDate]="viewDate()"
          [events]="events()"
          (eventClicked)="onEventClicked($event.event)"
        />
      }
      @case (CalendarView.Day) {
        <mwl-calendar-day-view
          [viewDate]="viewDate()"
          [events]="events()"
          (eventClicked)="onEventClicked($event.event)"
        />
      }
    }
  </div>

  <!-- Legend -->
  <div class="calendar-legend">
    <div class="legend-item">
      <span class="legend-dot" style="background: #3b82f6"></span>
      <span>Review Due</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot" style="background: #8b5cf6"></span>
      <span>Quiz</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot" style="background: #ef4444"></span>
      <span>Project Due</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot" style="background: #f59e0b"></span>
      <span>Challenge</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot" style="background: #22c55e"></span>
      <span>Mentor Session</span>
    </div>
  </div>
</div>
